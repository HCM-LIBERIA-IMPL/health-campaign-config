ServiceMaps:
  serviceName: household
  version: 1.0.0
  mappings:
    - topic: transformer-producer-household-index-v1-topic
      configKey: INDEX
      indexes:
        - name: household-index-v1
          type: household
          id: $.household.clientReferenceId
          isBulk: true
          jsonPath: $.*
          customJsonMapping:
            indexMapping: { "Data": { } }
            fieldMapping:
              - inJsonPath: $
                outJsonPath: $.Data
          timeStampField: $.household.auditDetails.createdTime
        - name: user-sync-index-v1
          type: users
          id: $.household.clientReferenceId,$.household.id
          isBulk: true
          jsonPath: $
          customJsonMapping:
            indexMapping: { "Data": {} }
            fieldMapping:
              - inJsonPath: $.household.auditDetails.lastModifiedBy
                outJsonPath: $.Data.userId
              - inJsonPath: $.userName
                outJsonPath: $.Data.userName
              - inJsonPath: $.role
                outJsonPath: $.Data.role
              - inJsonPath: $.boundaryHierarchy
                outJsonPath: $.Data.boundaryHierarchy
              - inJsonPath: $.household.auditDetails.createdTime
                outJsonPath: $.Data.clientCreatedTime
              - inJsonPath: $.@timestamp
                outJsonPath: $.Data.syncedTimeStamp
              - inJsonPath: $.@timestamp
                outJsonPath: $.Data.@timestamp
          timeStampField: $.household.auditDetails.createdTime
        - name: user-sync-index-v1
          type: users
          id: $.household.clientReferenceId
          isBulk: true
          jsonPath: $
          customJsonMapping:
            indexMapping: { "Data": {} }
            fieldMapping:
              - inJsonPath: $.household.auditDetails.lastModifiedBy
                outJsonPath: $.Data.syncedUserId
              - inJsonPath: $.userName
                outJsonPath: $.Data.syncedUserName
              - inJsonPath: $.nameOfUser
                outJsonPath: $.Data.nameOfSyncedUser
              - inJsonPath: $.role
                outJsonPath: $.Data.role
              - inJsonPath: $.boundaryHierarchy
                outJsonPath: $.Data.boundaryHierarchy
              - inJsonPath: $.household.clientAuditDetails.createdTime
                outJsonPath: $.Data.clientCreatedTime
              - inJsonPath: $.household.auditDetails.createdTime
                outJsonPath: $.Data.createdTime
              - inJsonPath: $.@timestamp
                outJsonPath: $.Data.@timestamp
              - inJsonPath: $.taskDates
                outJsonPath: $.Data.taskDates
          timeStampField: $.createdTime
    - topic: delete-household-topic
      configKey: INDEX
      indexes:
        - name: household-index-v1
          type: household
          id: $.clientReferenceId
          isBulk: true
          jsonPath: $.*
          timeStampField: $.auditDetails.lastModifiedTime
    - topic: transformer-producer-household-member-index-v1-topic
      configKey: INDEX
      indexes:
        - name: household-member-index-v1
          type: member
          id: $.householdMember.id
          isBulk: true
          jsonPath: $.*
          timeStampField: $.householdMember.auditDetails.createdTime
    - topic: delete-household-member-topic
      configKey: INDEX
      indexes:
        - name: household-member-index-v1
          type: member
          id: $.id
          isBulk: true
          jsonPath: $.*
          timeStampField: $.auditDetails.lastModifiedTime